========== TEST test_formulas_errors - Formula error handling ==========


---------- SUBTEST Invalid formula syntax ----------

ikup ./.cli-tests-data/wikipedia.png --cols 2+
error: Invalid expression: invalid syntax (<unknown>, line 1)
Exit code: 2
ikup ./.cli-tests-data/tux.png --rows invalid_function(5)
error: Unsupported function: invalid_function
Exit code: 2
ikup ./.cli-tests-data/small_arrow.png --max-cols 2 ** 3
error: Unsupported operator: Pow
Exit code: 2

---------- SUBTEST Unknown variables ----------

ikup ./.cli-tests-data/wikipedia.png --cols unknown_var
error: Unknown or unavailable variable: unknown_var
Exit code: 2
ikup ./.cli-tests-data/tux.png --rows fake_variable + 1
error: Unknown or unavailable variable: fake_variable
Exit code: 2

---------- SUBTEST Division by zero ----------

ikup ./.cli-tests-data/wikipedia.png --cols 10/0
error: Error while executing operator Div: float division by zero
Exit code: 2
ikup ./.cli-tests-data/tux.png --max-rows 5/(2-2)
error: Error while executing operator Div: float division by zero
Exit code: 2

---------- SUBTEST Invalid function calls ----------

ikup ./.cli-tests-data/wikipedia.png --cols min()
error: min() requires at least one argument
Exit code: 2
ikup ./.cli-tests-data/tux.png --rows ceil(1,2,3)
error: ceil() requires exactly one argument
Exit code: 2
ikup ./.cli-tests-data/small_arrow.png --max-cols unknown_func(5)
error: Unsupported function: unknown_func
Exit code: 2

---------- SUBTEST Positioning formula errors ----------

ikup ./.cli-tests-data/wikipedia.png --pos invalid_pos_var,5
[6n
_Gi=[[id:.*]],t=f,q=2,f=100,a=T,U=1,r=24,c=53;{{.*}}\
error: Unknown or unavailable variable: invalid_pos_var
Exit code: 2
ikup ./.cli-tests-data/tux.png --pos 5/0,tr/2
[6n
_Gi=[[id:.*]],t=f,q=2,f=100,a=T,U=1,r=23,c=38;{{.*}}\
error: Error while executing operator Div: float division by zero
Exit code: 2

