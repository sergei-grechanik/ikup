========== TEST test_validation - Validation of CLI options and environment variables ==========


---------- SUBTEST Invalid string values for cols/rows ----------

ikup placeholder 123 --cols invalid --rows 5
error: Unknown or unavailable variable: invalid
Exit code: 2
ikup placeholder 123 --cols 5 --rows invalid
error: Unknown or unavailable variable: invalid
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg --cols abc --rows 5
error: Unknown or unavailable variable: abc
Exit code: 2
ikup upload ./.cli-tests-data/earth.jpg --rows xyz --cols 3
error: Unknown or unavailable variable: xyz
Exit code: 2

---------- SUBTEST Negative values for cols/rows ----------

ikup placeholder 123 --cols -1 --rows 5
error: Start column must be less than end column, but 0 >= -1
Exit code: 2
ikup placeholder 123 --cols 5 --rows -10
error: Start row must be less than end row, but 0 >= -10
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg --cols -5 --rows 3
error: cols must be positive: -5
Exit code: 2
ikup upload ./.cli-tests-data/earth.jpg --rows -2 --cols 4
error: rows must be positive: -2
Exit code: 2

---------- SUBTEST Zero values for cols/rows ----------

ikup placeholder 123 --cols 0 --rows 5
error: Start column must be less than end column, but 0 >= 0
Exit code: 2
ikup placeholder 123 --cols 5 --rows 0
error: Start row must be less than end row, but 0 >= 0
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg --cols 0 --rows 3
error: cols must be positive: 0
Exit code: 2
ikup upload ./.cli-tests-data/earth.jpg --rows 0 --cols 4
error: rows must be positive: 0
Exit code: 2

---------- SUBTEST Invalid string values for scale ----------

ikup display ./.cli-tests-data/earth.jpg --scale invalid
{{:SKIP_LINES:}}
ikup display: error: argument --scale/-s: invalid float value: 'invalid'
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg -s abc
{{:SKIP_LINES:}}
ikup display: error: argument --scale/-s: invalid float value: 'abc'
Exit code: 2
ikup upload ./.cli-tests-data/earth.jpg --scale xyz
{{:SKIP_LINES:}}
ikup upload: error: argument --scale/-s: invalid float value: 'xyz'
Exit code: 2

---------- SUBTEST Zero and negative values for scale ----------

ikup display ./.cli-tests-data/earth.jpg --scale 0
error: scale must be positive and not too big: '0.0' (set via command line)
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg --scale -1.5
error: scale must be positive and not too big: '-1.5' (set via command line)
Exit code: 2
ikup upload ./.cli-tests-data/earth.jpg -s -0.1
error: scale must be positive and not too big: '-0.1' (set via command line)
Exit code: 2

---------- SUBTEST Too large values for scale ----------

ikup display ./.cli-tests-data/earth.jpg --scale 1000001
error: scale must be positive and not too big: '1000001.0' (set via command line)
Exit code: 2
ikup upload ./.cli-tests-data/earth.jpg -s 9999999.0
error: scale must be positive and not too big: '9999999.0' (set via command line)
Exit code: 2

---------- SUBTEST Invalid IKUP_SCALE environment variable ----------

ikup display ./.cli-tests-data/earth.jpg
error: Invalid value for scale: 'invalid' (set via IKUP_SCALE): could not convert string to float: 'invalid'
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg
error: scale must be positive and not too big: '0.0' (set via IKUP_SCALE)
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg
error: scale must be positive and not too big: '-1.0' (set via IKUP_SCALE)
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg
error: scale must be positive and not too big: '1000001.0' (set via IKUP_SCALE)
Exit code: 2

---------- SUBTEST Invalid IKUP_GLOBAL_SCALE environment variable ----------

ikup display ./.cli-tests-data/earth.jpg
error: Invalid value for global_scale: 'invalid' (set via IKUP_GLOBAL_SCALE): could not convert string to float: 'invalid'
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg
error: global_scale must be positive and not too big: '0.0' (set via IKUP_GLOBAL_SCALE)
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg
error: global_scale must be positive and not too big: '-2.5' (set via IKUP_GLOBAL_SCALE)
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg
error: global_scale must be positive and not too big: '2000000.0' (set via IKUP_GLOBAL_SCALE)
Exit code: 2

---------- SUBTEST Invalid max cols/rows values ----------

ikup display ./.cli-tests-data/earth.jpg --max-cols 0
error: max_cols must be positive: 0
Exit code: 2
ikup display ./.cli-tests-data/earth.jpg --max-rows 0
error: max_rows must be positive: 0
Exit code: 2
ikup upload ./.cli-tests-data/earth.jpg --max-cols -5
error: max_cols must be positive: -5
Exit code: 2
ikup upload ./.cli-tests-data/earth.jpg --max-rows -2
error: max_rows must be positive: -2
Exit code: 2
